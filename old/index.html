<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>visualizer.js </h1>
	<p id="yas">♥</p>

	
    <button type="button" id="button">play!</button>
	<br>
    <textarea type="textarea" id="outputbox" cols=102 rows=40></textarea>
    
    <p id="output"></p>
    <iframe width="420" height="315" id="vid"
src="https://www.youtube.com/embed/u8EgTzNrR2g">
</iframe> 
<script>
	
	const vid = document.getElementById("vid");
	const yas = document.getElementById("yas");
	 const buttonid = document.getElementById("button");
     //const inputid = document.getElementById("inputbox");
     const outputid = document.getElementById("outputbox");
	let count_trace = 1;
	
	var g = "♥"
	var f = "  "


function Amor(){
		yas.style.color="red";
		let beat = Math.sin(count_trace)*2+50;
		//yas.style.fontSize=(beat.toString()+"px");
	
};
function sin(i){
	Amor();
	let wave = []
	let warray = []
	
		
	for(let k = 0; k<10; k++){
		//let x = i/30+(k*3)
		let x = (i*(k+1))/500
		//x =(x*x+i)/100
		wave[k] = toDec(Math.sin(x),40);
	};
	//check if range has array
	RangeInArray(.1,1,wave);
	//output
		
	trace(g+RangeInArray(.1/5,1,wave)+g );
		

	
		
};
var intervalId;
var counter=0;
Loop(0,60);
function Loop(deadline,framerate){
	if(!intervalId){
		intervalId = setInterval( ()=>{
		counter++;
		if(counter>deadline && deadline!=0){clearInterval(intervalId);intervalId=null;};
		sin(counter);
	}, framerate);	
			
			
			
}
	
	
};
function RangeInArray(steps,rng,arr){
	let out =[]
	
		for(let j = -rng; j<rng; j+=steps){
					if( arr.includes(toDec(j,40)) ){ 
						out+=g
					}else{
						out+=f
					};
			};	
	return out
};
function deleteLine(str){
		// break the textblock into an array of lines
		let lines = str.split('\n');
		// remove one line, starting at the first position
		lines.splice(0,1);
		// join the array back into a single string
		return lines.join('\n');
	
};

function trace(str){
	outputid.scrollTop = 99999;
	
	//console.log(str);
	count_trace +=1;
	if(count_trace<41){
		document.getElementById("outputbox").innerHTML += str+"\n";
		
	}else{
		document.getElementById("outputbox").innerHTML += str+"\n";
		document.getElementById("outputbox").innerHTML = deleteLine(document.getElementById("outputbox").innerHTML)
};
	
	
};
function toDec(x,dec){
	dec = 50
	//todo make 1 default
	//round number to only 1 decimal
	return Math.round(x * dec) / dec
};


    </script>
</body>
</html>
